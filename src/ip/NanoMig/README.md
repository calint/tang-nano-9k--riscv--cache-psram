From: https://github.com/harbaum/NanoMig/tree/372910a04bb12534e0787348ed9087188dcdfa10/src/misc
